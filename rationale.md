In the original version of this project, the `Library` object tried to do everything. It contained the rules for adding books and members, the logic for checking out books, the code that talked to `localStorage`, the DOM rendering logic, alert messages, and even fake payment and email operations. This design violated the Single Responsibility Principle because one object had many unrelated responsibilities. It also made the code hard to extend; for example, changing the way payments or notifications worked required editing the main `Library` object directly, which violates the Open/Closed Principle.

In the refactored version, I separated the system into smaller classes with clear, focused roles. `BookRepo` and `MemberRepo` are responsible only for persistence and basic lookups. They know how to load and save data from `localStorage`, but they do not contain any business rules or UI code. `LibraryService` contains the domain logic: validating input, making sure book and member IDs are unique, enforcing that a book cannot be checked out twice, computing a simple checkout fee, and updating the memberâ€™s balance and book status. This service does not touch the DOM or call `alert`, and it does not know how data is stored.

Infrastructure concerns are handled by `PaymentProvider`, `Mailer`, and `Logger`. These classes provide simple interfaces for charging a credit card, sending an email, and recording events. They are injected into `LibraryService` through its constructor, which means they can be replaced without modifying the domain logic. Finally, `LibraryController` acts as the UI layer. It responds to button clicks, calls methods on `LibraryService`, and then updates the HTML using render functions. Any errors thrown by the service are caught in the controller and shown to the user with `alert`. This design respects SRP by giving each class a single responsibility, and it respects OCP by allowing new payment or notification implementations to be introduced by changing only the wiring code, not the core `LibraryService`.
