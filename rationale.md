In the original version of the project, almost everything was inside one large Library object. It handled storage, business rules, UI rendering, email sending, payment, and logging all together. This violated the Single Responsibility Principle because one object was responsible for so many unrelated tasks and didnt stick to one true role. To fix this, I separated the program into smaller classes, each focused exactly on one role. For example, BookRepo now handles all book data and saving/loading that data from the local storage. MemberRepo does the same for members. The actual rules for adding books, checking out books, calculating fees, and registering members were moved into a LibraryService class, so domain logic no longer depends on the DOM or storage. I also added try/catch statements in the UI so that any errors thrown by the domain service can be caught in the controller and displayed using alert, which keeps the error messages in the UI layer instead of the domain. The DOM updates were moved into LibraryController, which now only renders the UI and wires up button events. I also added simple duplicate-ID checks in the service (if (this.books.findBookById(id))) so that users can’t add multiple books or members with the same ID. This kind of validation belongs in the domain logic, so I kept it inside LibraryService.

For the Open/Closed Principle, the main issue in the original code was that the payment provider and email sender were coded directly inside the Library object. To fix this, I created PaymentProvider and Mailer as separate classes. They are now passed into LibraryService from the outside, which means the service does not depend on a specific implementation anymore. If I wanted to add a completely different payment system later (for example like apple pay or Paypal), I wouldn’t need to change any logic inside LibraryService. I would just create a new provider class with the same charge() method and pass it in the bootstrap. The same thing applies for the Mailer class. Overall, the new design keeps each part focused on one task and makes the system easier to extend without touching any of the previous code.